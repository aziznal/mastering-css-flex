<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Master CSS Flex</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />

    <!-- CodeMirror CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css"
    />
    <!-- CodeMirror theme (optional) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css"
    />
  </head>

  <body>
    <h1 class="site-title">Flexbox Playground</h1>

    <div id="table-of-contents">
      <h1>Table of Contents</h1>
      <ol id="toc-list"></ol>
    </div>

    <!-- No Flex -->
    <div class="flex-example">
      <h1 class="title">No Flex (default styles)</h1>

      <section class="visuals">
        <div>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
        </div>
      </section>

      <section class="code">
        <style id="no-flex-example">
          /* nothing ... */
        </style>

        <textarea data-target="no-flex-example"> </textarea>
      </section>

      <p class="description">
        Block elements are stacked on top of each other by default.
      </p>
    </div>

    <!-- Flex -->
    <div class="flex-example">
      <h1 class="title">Flex</h1>

      <section class="visuals">
        <div id="flex">
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
        </div>
      </section>

      <section class="code">
        <style id="basic-flex-example">
          #flex {
            display: flex;
            flex-direction: row;
          }
        </style>

        <textarea data-target="basic-flex-example"></textarea>
      </section>

      <p class="description">
        Flex allows us to control the layout of the children elements. Try
        changing the flex-direction to <code>column</code>.
      </p>
    </div>

    <!-- Flex with Gap -->
    <div class="flex-example">
      <h1 class="title">Flex with Gap</h1>

      <section class="visuals">
        <div id="flex-gap">
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
        </div>
      </section>

      <section class="code">
        <style id="flex-gap-example">
          #flex-gap {
            display: flex;
            flex-direction: row;
            gap: 1rem;
          }
        </style>

        <textarea data-target="flex-gap-example"></textarea>
      </section>

      <p class="description">
        Gap is a shorthand property for <code>row-gap</code> and
        <code>column-gap</code>. It allows us to easily add space between the
        children.
      </p>
    </div>

    <!-- Flex Row (no wrap) -->
    <div class="flex-example">
      <h1 class="title">Flex Row (no wrap)</h1>

      <section class="visuals">
        <div id="flex-row-no-wrap">
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
        </div>
      </section>

      <section class="code">
        <style id="flex-row-no-wrap-styles">
          /*
          * You found me!
          *
          */

          #flex-row-no-wrap {
            display: flex;
            flex-flow: row nowrap;
          }
        </style>

        <textarea data-target="flex-row-no-wrap-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Row (with wrap) -->
    <div class="flex-example">
      <h1 class="title">Flex Row (with wrap)</h1>

      <section class="visuals">
        <div id="flex-row-wrap">
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
        </div>
      </section>

      <section class="code">
        <style id="flex-row-wrap-styles">
          #flex-row-wrap {
            display: flex;
            flex-flow: row wrap;

            /* 
             * uncomment this line 
             * to see what's happening
            */
            /* background-color: #777777; */

            /* 
             * uncomment this line 
             * to see what's the spacing
             * look better
            */
            /* height: fit-content; */
          }
        </style>
        <textarea data-target="flex-row-wrap-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex row wrap with gap! -->
    <div class="flex-example">
      <h1 class="title">Flex row wrap with gap!</h1>

      <section class="visuals">
        <div id="flex-row-wrap-gap">
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
          <span class="box"></span>
        </div>
      </section>

      <section class="code">
        <style id="flex-row-wrap-gap-styles">
          #flex-row-wrap-gap {
            display: flex;
            flex-flow: row wrap;
            gap: 1rem;
          }
        </style>
        <textarea data-target="flex-row-wrap-gap-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Grow -->
    <div class="flex-example">
      <h1 class="title">Flex Grow</h1>

      <section class="visuals">
        <div id="flex-grow">
          <span class="box" id="box-1">1</span>
          <span class="box" id="box-2">2</span>
          <span class="box" id="box-3">3</span>
          <span class="box" id="box-4">4</span>
          <span class="box" id="box-5">5</span>
        </div>
      </section>

      <section class="code">
        <style id="flex-grow-styles">
          #flex-grow {
            display: flex;
            flex-flow: row nowrap;

            width: 100%;
          }

          #flex-grow > #box-1 {
            flex-grow: 10;
          }

          #flex-grow > #box-2 {
            flex-grow: 5;
          }
        </style>

        <textarea data-target="flex-grow-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Shrink -->
    <div class="flex-example">
      <h1 class="title">Flex Shrink</h1>

      <section class="visuals">
        <div id="flex-shrink">
          <span class="box" id="box-1">1</span>
          <span class="box" id="box-2">2</span>
          <span class="box" id="box-3">3</span>
          <span class="box" id="box-4">4</span>
          <span class="box" id="box-5">5</span>
        </div>
      </section>
      <section class="code">
        <style id="flex-shrink-styles">
          #flex-shrink {
            display: flex;
            flex-flow: row nowrap;

            width: 30%;

            background-color: red;
          }

          #flex-shrink > #box-1 {
            flex-shrink: 0;
          }

          #flex-shrink > #box-2 {
            flex-shrink: 0;
          }

          #flex-shrink > #box-3 {
            flex-shrink: 0;
          }

          #flex-shrink > #box-4 {
            flex-shrink: 0;
          }
        </style>

        <textarea data-target="flex-shrink-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Basis -->
    <div class="flex-example">
      <h1 class="title">Flex Basis</h1>

      <section class="visuals">
        <div id="flex-basis">
          <span class="box" id="box-1">1</span>
          <span class="box" id="box-2">2</span>
          <span class="box" id="box-3">3</span>
          <span class="box" id="box-4">4</span>
          <span class="box" id="box-5">5</span>
        </div>
      </section>

      <section class="code">
        <style id="flex-basis-styles">
          #flex-basis {
            display: flex;
            flex-flow: row nowrap;

            width: 100%;
          }

          #flex-basis > #box-1 {
            flex-basis: 10%;
          }

          #flex-basis > #box-2 {
            flex-basis: 20%;
          }

          #flex-basis > #box-3 {
            flex-basis: 30%;
          }

          #flex-basis > #box-4 {
            flex-basis: 40%;
          }

          #flex-basis > #box-5 {
            flex-basis: 50%;
          }
        </style>

        <textarea data-target="flex-basis-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex "Flex" -->
    <div class="flex-example">
      <h1 class="title">Flex "Flex" Property</h1>

      <section class="visuals">
        <!-- Add your visuals here -->
      </section>

      <section class="code">
        <style id="flex-flex_property-styles"></style>
        <textarea data-target="flex-flex_property-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Align-Self -->
    <div class="flex-example">
      <h1 class="title">Flex Align-Self</h1>

      <section class="visuals">
        <div id="flex-align-self">
          <span class="box" id="box-1">1</span>
          <span class="box" id="box-2">2</span>
          <span class="box" id="box-3">3</span>
          <span class="box" id="box-4">4</span>
          <span class="box" id="box-5">5</span>
        </div>
      </section>

      <section class="code">
        <style id="flex-align-self-styles">
          #flex-align-self {
            display: flex;
            flex-flow: row nowrap;

            width: 100%;
          }

          #flex-align-self > #box-1 {
            align-self: flex-start;
          }

          #flex-align-self > #box-2 {
            align-self: flex-end;
          }

          #flex-align-self > #box-3 {
            align-self: center;
          }

          #flex-align-self > #box-4 {
            align-self: baseline;
          }

          #flex-align-self > #box-5 {
            align-self: stretch;
          }
        </style>

        <textarea data-target="flex-align-self-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Align-Items Stretch -->
    <div class="flex-example">
      <h1 class="title">Flex Align-Items Stretch</h1>

      <section class="visuals">
        <div id="flex-align-items-stretched">
          <span class="freeheight box">1</span>
          <span class="freeheight box">2</span>
          <span class="freeheight box">3</span>
          <span class="freeheight box">4</span>
          <span class="freeheight box">5</span>
        </div>
      </section>

      <section class="code">
        <style id="flex-align-items-stretched-styles">
          /*
           * note: box height has been removed 
           */

          #flex-align-items-stretched {
            display: flex;
            flex-flow: row nowrap;

            width: 100%;

            align-items: stretch;
          }
        </style>

        <textarea data-target="flex-align-items-stretched-styles"> </textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>

    <!-- Flex Order -->
    <div class="flex-example">
      <h1 class="title">Flex Order</h1>

      <section class="visuals">
        <div id="flex-order">
          <span class="box" id="box-1">1</span>
          <span class="box" id="box-2">2</span>
          <span class="box" id="box-3">3</span>
          <span class="box" id="box-4">4</span>
          <span class="box" id="box-5">5</span>
        </div>
      </section>

      <section class="code">
        <style id="flex-order-styles">
          #flex-order {
            display: flex;
            flex-flow: row;
          }

          #flex-order > #box-1 {
            order: 0;
          }

          #flex-order > #box-2 {
            order: -4;
          }

          #flex-order > #box-3 {
            order: -7;
          }

          #flex-order > #box-4 {
            order: -2;
          }

          #flex-order > #box-5 {
            order: -1;
          }
        </style>

        <textarea data-target="flex-order-styles"></textarea>
      </section>

      <p class="description">Ain't nothing here.</p>
    </div>
  </body>

  <!-- CodeMirror JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
  <!-- CodeMirror mode for CSS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>

  <!-- CSS syntax highlighting and live-edit -->
  <script>
    function trimLeadingWhitespace(text) {
      const lines = text.split("\n");
      const minIndent = lines
        .filter((line) => line.trim().length > 0)
        .reduce(
          (min, line) => Math.min(min, line.match(/^\s*/)[0].length),
          Infinity
        );

      return lines
        .map((line) => line.slice(minIndent))
        .join("\n")
        .trim();
    }

    document.querySelectorAll("textarea[data-target]").forEach((textarea) => {
      const targetStyleId = textarea.getAttribute("data-target");
      const targetStyle = document.getElementById(targetStyleId);

      // Copy initial styles from the <style> block to the editor
      textarea.textContent = trimLeadingWhitespace(targetStyle.textContent);

      const codeMirrorInstance = CodeMirror.fromTextArea(textarea, {
        mode: "css",
        theme: "dracula", // Optional theme
        lineNumbers: true,
        lineWrapping: true,
      });

      // Update live styles when the editor content changes
      codeMirrorInstance.on("change", (editor) => {
        targetStyle.textContent = editor.getValue();
      });

      // Set initial content of the live styles
      targetStyle.textContent = codeMirrorInstance.getValue();
    });
  </script>

  <!-- Table of contents -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const headings = document.querySelectorAll("h1, h1, h3, h4, h5, h6");
      const tocList = document.getElementById("toc-list");

      headings.forEach(function (heading) {
        const listItem = document.createElement("li");
        const link = document.createElement("a");

        // Create an ID for each heading if it doesn't have one
        if (!heading.id) {
          heading.id = heading.textContent
            .toLowerCase()
            .replace(/[^a-z0-9]+/g, "-");
        }

        // Create a link pointing to the heading
        link.href = "#" + heading.id;
        link.textContent = heading.textContent;

        // Indent the list item according to the heading level
        listItem.style.marginLeft =
          (parseInt(heading.tagName.substring(1)) - 1) * 20 + "px";

        listItem.appendChild(link);
        tocList.appendChild(listItem);
      });
    });
  </script>
</html>
